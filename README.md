Ce script Python lit une image fournie par l'utilisateur, découpe cette image en blocs de pixels de taille définie, calcule la couleur moyenne de chaque bloc, associe cette couleur à l'une des huit couleurs prédéfinies (rouge, vert, bleu, jaune, magenta, cyan, blanc ou noir) en fonction de seuils simples sur les valeurs RGB, puis génère deux fichiers de sortie dont l'emplacement est défini par l'utilisateur. Le premier fichier, resultat_pixels.txt, contient la liste des couleurs détectées bloc par bloc sous forme textuelle. Le second fichier, script_kandinsky_numworks.py, est un script compatible avec la bibliothèque kandinsky des calculatrices NumWorks : il redessine l'image simplifiée sous forme de carrés colorés. Pour éviter les problèmes de surcharge de la calculatrice, le dessin est découpé en quatre fonctions (draw_batch_0 à draw_batch_3) qui chacune dessinent une portion de l'image. Le code utilise les modules PIL pour la manipulation d'image et pathlib pour la gestion des chemins, demande dynamiquement à l'utilisateur le chemin de l'image d'entrée ainsi que le dossier de sortie, et vérifie que ces chemins existent avant de poursuivre l'exécution.
Yoooo, j'ai ajouté la même pour axi_draw. En gros, ce script c'est un convertisseur d'images PNG vers un code Python qui va piloter ton AxiDraw. Il commence par vérifier que ton image fait bien 1060x750 pixels (sinon il râle), puis il la convertit en niveaux de gris. Ensuite, il parcourt l'image ligne par ligne, mais seulement toutes les 5 lignes pour éviter de surcharger le dessin. Pour chaque ligne qu'il analyse, il regarde pixel par pixel et quand il trouve une zone sombre, il note les coordonnées de début, continue jusqu'à trouver une zone claire, et là il écrit une instruction dans le script final du genre "dessin.segment(x_début, y, x_fin, y)" pour que l'AxiDraw trace un trait à cet endroit. Le résultat final, c'est un script Python tout propre qui, quand tu l'exécutes, dessine ton image comme si un humain avait fait des lignes horizontales en appuyant son stylo seulement sur les parties sombres - un peu comme un scan de ligne que ferait un artiste. Tu peux même choisir l'espacement entre les lignes pour avoir plus ou moins de détails selon tes goûts.
